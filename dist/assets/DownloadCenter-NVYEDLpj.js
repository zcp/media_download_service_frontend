import{aB as E,aC as I,r as N,c as V,j as A,h as P,S as R,al as l,y as U,z as _,A as n,Q as e,I as t,u as a,O as $,M as x,H as c,K as g,T as j,L as z}from"./vue-CG64YRnT.js";import{u as H,a as K}from"./index-DpMErgrC.js";import{u as k,c as L,s as O,l as Q,p as q,d as F,w as G,f as J,v as W,e as X,E as h}from"./elementPlus-Djpklj9S.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-Dq7h7Pqt.js";const Z={class:"download-center"},ee={class:"header"},te={class:"header-right"},oe={class:"user-info"},ne={class:"username"},ae={class:"main-content"},se={class:"sidebar"},le={class:"content-area"},de={__name:"DownloadCenter",setup(ue){const y=E(),i=I(),f=H(),m=K(),p=N(""),u=V(()=>i.params.taskId||null);A(()=>i.path,d=>{p.value=d},{immediate:!0});const B=d=>{d!==i.path&&y.push(d)},C=async d=>{switch(d){case"profile":h.info("个人信息功能待实现");break;case"logout":try{await X.confirm("确定要退出登录吗？","确认退出",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),f.logout(),h.success("已退出登录")}catch{}break}};return P(()=>{console.log("下载中心页面已挂载"),m.startPolling(5e3)}),R(()=>{console.log("下载中心页面已卸载"),m.stopPolling()}),(d,o)=>{const s=l("el-icon"),w=l("el-dropdown-item"),S=l("el-dropdown-menu"),b=l("el-dropdown"),r=l("el-menu-item"),v=l("el-sub-menu"),M=l("el-menu"),T=l("router-view");return _(),U("div",Z,[n("div",ee,[o[2]||(o[2]=n("div",{class:"header-left"},[n("h1",{class:"title"},"媒体下载服务")],-1)),n("div",te,[e(b,{onCommand:C},{dropdown:t(()=>[e(S,null,{default:t(()=>[e(w,{command:"profile"},{default:t(()=>[e(s,null,{default:t(()=>[e(a(k))]),_:1}),o[0]||(o[0]=x(" 个人信息 "))]),_:1,__:[0]}),e(w,{command:"logout",divided:""},{default:t(()=>[e(s,null,{default:t(()=>[e(a(O))]),_:1}),o[1]||(o[1]=x(" 退出登录 "))]),_:1,__:[1]})]),_:1})]),default:t(()=>[n("span",oe,[e(s,{class:"user-icon"},{default:t(()=>[e(a(k))]),_:1}),n("span",ne,$(a(f).username||"用户"),1),e(s,{class:"arrow-down"},{default:t(()=>[e(a(L))]),_:1})])]),_:1})])]),n("div",ae,[n("div",se,[e(M,{"default-active":p.value,mode:"vertical",onSelect:B,class:"nav-menu"},{default:t(()=>[e(r,{index:"/download-center/tasks"},{default:t(()=>[e(s,null,{default:t(()=>[e(a(Q))]),_:1}),o[3]||(o[3]=n("span",null,"下载任务列表",-1))]),_:1,__:[3]}),e(r,{index:"/download-center/tasks/create"},{default:t(()=>[e(s,null,{default:t(()=>[e(a(q))]),_:1}),o[4]||(o[4]=n("span",null,"创建下载任务",-1))]),_:1,__:[4]}),u.value?(_(),c(v,{key:0,index:"failures"},{title:t(()=>[e(s,null,{default:t(()=>[e(a(G))]),_:1}),o[5]||(o[5]=n("span",null,"失败记录管理",-1))]),default:t(()=>[e(r,{index:`/download-center/tasks/${u.value}/failures`},{default:t(()=>[e(s,null,{default:t(()=>[e(a(F))]),_:1}),o[6]||(o[6]=n("span",null,"下载失败记录",-1))]),_:1,__:[6]},8,["index"])]),_:1})):g("",!0),u.value?(_(),c(v,{key:1,index:"videos"},{title:t(()=>[e(s,null,{default:t(()=>[e(a(W))]),_:1}),o[7]||(o[7]=n("span",null,"视频管理",-1))]),default:t(()=>[e(r,{index:`/download-center/tasks/${u.value}/videos`},{default:t(()=>[e(s,null,{default:t(()=>[e(a(J))]),_:1}),o[8]||(o[8]=n("span",null,"已下载视频",-1))]),_:1,__:[8]},8,["index"])]),_:1})):g("",!0)]),_:1},8,["default-active"])]),n("div",le,[e(T,null,{default:t(({Component:D})=>[e(j,{name:"fade",mode:"out-in"},{default:t(()=>[(_(),c(z(D)))]),_:2},1024)]),_:1})])])])}}},me=Y(de,[["__scopeId","data-v-3e68f6ff"]]);export{me as default};

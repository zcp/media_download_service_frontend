import{aB as E,aC as M,r as T,c as U,j as N,h as R,S as A,al as l,y as H,z as w,A as n,Q as e,I as o,u as a,O as I,M as i,T as V,H as F,L}from"./vue-CG64YRnT.js";import{u as O,a as P,F as v}from"./index-CYcOiW0B.js";import{u as g,c as j,s as z,l as Q,p as q,d as G,w as J,f as K,v as W,e as X,E as Y}from"./elementPlus-Djpklj9S.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-Dq7h7Pqt.js";const $={class:"download-center"},ee={class:"header"},oe={class:"header-right"},te={class:"user-info"},ne={class:"username"},se={class:"main-content"},ae={class:"sidebar"},le={class:"content-area"},de={__name:"DownloadCenter",setup(ue){const x=E(),r=M(),c=O(),m=P(),f=T("");U(()=>r.params.taskId||null),N(()=>r.path,d=>{f.value=d},{immediate:!0});const h=d=>{d!==r.path&&x.push(d)},k=async d=>{switch(d){case"profile":const t=v+"/pages/user/profile";window.location.href=t;break;case"home":const s=v+"/pages/index/index";window.location.href=s;break;case"logout":try{await X.confirm("确定要退出登录吗？","确认退出",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),c.logout(),Y.success("已退出登录")}catch{}break}};return R(()=>{console.log("下载中心页面已挂载"),m.startPolling(5e3)}),A(()=>{console.log("下载中心页面已卸载"),m.stopPolling()}),(d,t)=>{const s=l("el-icon"),_=l("el-dropdown-item"),S=l("House"),B=l("el-dropdown-menu"),b=l("el-dropdown"),u=l("el-menu-item"),p=l("el-sub-menu"),y=l("el-menu"),C=l("router-view");return w(),H("div",$,[n("div",ee,[t[3]||(t[3]=n("div",{class:"header-left"},[n("h1",{class:"title"},"媒体下载服务")],-1)),n("div",oe,[e(b,{onCommand:k},{dropdown:o(()=>[e(B,null,{default:o(()=>[e(_,{command:"profile"},{default:o(()=>[e(s,null,{default:o(()=>[e(a(g))]),_:1}),t[0]||(t[0]=i(" 个人信息 "))]),_:1,__:[0]}),e(_,{command:"home"},{default:o(()=>[e(s,null,{default:o(()=>[e(S)]),_:1}),t[1]||(t[1]=i(" 主页 "))]),_:1,__:[1]}),e(_,{command:"logout",divided:""},{default:o(()=>[e(s,null,{default:o(()=>[e(a(z))]),_:1}),t[2]||(t[2]=i(" 退出登录 "))]),_:1,__:[2]})]),_:1})]),default:o(()=>[n("span",te,[e(s,{class:"user-icon"},{default:o(()=>[e(a(g))]),_:1}),n("span",ne,I(a(c).username||"用户"),1),e(s,{class:"arrow-down"},{default:o(()=>[e(a(j))]),_:1})])]),_:1})])]),n("div",se,[n("div",ae,[e(y,{"default-active":f.value,mode:"vertical",onSelect:h,class:"nav-menu"},{default:o(()=>[e(u,{index:"/download-center/tasks"},{default:o(()=>[e(s,null,{default:o(()=>[e(a(Q))]),_:1}),t[4]||(t[4]=n("span",null,"下载任务列表",-1))]),_:1,__:[4]}),e(u,{index:"/download-center/tasks/create"},{default:o(()=>[e(s,null,{default:o(()=>[e(a(q))]),_:1}),t[5]||(t[5]=n("span",null,"创建下载任务",-1))]),_:1,__:[5]}),e(p,{index:"failures"},{title:o(()=>[e(s,null,{default:o(()=>[e(a(J))]),_:1}),t[6]||(t[6]=n("span",null,"失败记录管理",-1))]),default:o(()=>[e(u,{index:"/download-center/failures"},{default:o(()=>[e(s,null,{default:o(()=>[e(a(G))]),_:1}),t[7]||(t[7]=n("span",null,"下载失败记录",-1))]),_:1,__:[7]})]),_:1}),e(p,{index:"videos"},{title:o(()=>[e(s,null,{default:o(()=>[e(a(W))]),_:1}),t[8]||(t[8]=n("span",null,"视频管理",-1))]),default:o(()=>[e(u,{index:"/download-center/videos"},{default:o(()=>[e(s,null,{default:o(()=>[e(a(K))]),_:1}),t[9]||(t[9]=n("span",null,"已下载视频",-1))]),_:1,__:[9]})]),_:1})]),_:1},8,["default-active"])]),n("div",le,[e(C,null,{default:o(({Component:D})=>[e(V,{name:"fade",mode:"out-in"},{default:o(()=>[(w(),F(L(D)))]),_:2},1024)]),_:1})])])])}}},fe=Z(de,[["__scopeId","data-v-2f442033"]]);export{fe as default};
